@model IEnumerable<novelaweb2.Models.Novela>
@{
    ViewData["Title"] = "Inicio";
    var destacadas = ViewBag.Destacadas as List<novelaweb2.Models.Novela> ?? new();
    int current = ViewBag.CurrentPage ?? 1;
    int total = ViewBag.TotalPages ?? 1;
}
<div class="max-1200">

    <!-- Banner / Destacadas -->
    <div class="hero mb-4">
        <img class="hero-bg" src="https://picsum.photos/1600/500?blur=3" alt="banner" />
        <div class="hero-overlay"></div>
        <div class="hero-content text-center">
            <h1 class="text-white fw-bold mb-2">Bienvenido a Web Novelas</h1>
            <p class="text-light mb-3">Descubre las series más recientes y mejor valoradas</p>
            @if (destacadas.Any())
            {
                <div class="d-flex justify-content-center gap-2 flex-wrap">
                    @foreach (var d in destacadas)
                    {
                        <a class="btn btn-primary btn-sm" asp-controller="Novelas" asp-action="Details" asp-route-id="@d.Id">@d.Titulo</a>
                    }
                </div>
            }
        </div>
    </div>

    <h3 class="section-title">Últimas actualizaciones</h3>

    <div class="grid">
        @foreach (var n in Model)
        {
            <a class="card-novel" asp-controller="Novelas" asp-action="Details" asp-route-id="@n.Id">
                <img class="thumb" src="@(string.IsNullOrWhiteSpace(n.PortadaUrl) ? "https://picsum.photos/400/600?grayscale" : n.PortadaUrl)" alt="@n.Titulo" />
                <div class="meta">
                    <h5>@n.Titulo</h5>
                    <p>@(n.Capitulos?.Count ?? 0) capítulos</p>
                </div>
            </a>
        }
    </div>

    <!-- Paginación -->
    <nav class="mt-4">
        <ul class="pagination justify-content-center">
            <li class="page-item @(current <= 1 ? "disabled" : "")">
                <a class="page-link" asp-action="Index" asp-route-page="@(current - 1)">Anterior</a>
            </li>
            @for (int p = 1; p <= total; p++)
            {
                <li class="page-item @(p == current ? "active" : "")">
                    <a class="page-link" asp-action="Index" asp-route-page="@p">@p</a>
                </li>
            }
            <li class="page-item @(current >= total ? "disabled" : "")">
                <a class="page-link" asp-action="Index" asp-route-page="@(current + 1)">Siguiente</a>
            </li>
        </ul>
    </nav>
</div>
